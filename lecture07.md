# 第7回課題 

これまで作ってきた環境が、どんな攻撃にたいして「脆弱」か？どのような対策が取れるのか？<br>
課題の復習を踏まえてまとめていきます。

## セキュリティの基本原則
* 想定されるリスクを洗い出す
* リスクに対して、対応方針を定義

### 想定されるリスク
|要因|説明|
|:--|:--|
|脆弱性|バグ、設定不備によるシステムの「穴、弱点」のこと。<br>※ログを吐き出すためのプログラムに特定のルールに従った文字をログとして送ると、OS へのコマンドであると間違って解釈されるという事例が過去にある。|
|認証情報の流出|誤って GitHub など公開の場にアップロードした情報を収集している攻撃者が、その情報でログインを試みる。<br>※広義としては脆弱性に含まれるが、とくに原因として多く発生する為要因の 1 つとして切り出している。|
|人為的な 過負荷|多数のコンピューターから連続でリクエストを送り、停止に追いやる。<br>※DDoS 攻撃など|

### 対応方針
|アクション|説明|
|:--|:--|
|受容|そのまま受け入れ、何も対策は行わない。<br>何か影響があっても、このままでいいと判断したもの   がこの対応になることが多い|
|低減|影響を減らすような対策。<br>受容のままではダメと判断したときに行う。<br>※機密データを分類し、分類したものを個別で認証を設定したり等対策。　|
|移転(転嫁)|そもそものリスク管理を当事者以外に任せる。|
|回避|リスク自体を発生させない。|


## リスクの要因別に対策を整理
### 脆弱性
* アプリケーション
    |対策|説明|適用状況|
    |:--|:--|:--|
    |Dependabot|モジュール、ライブラリの更新を指摘してくれるBot。|適用|
    |CodeGuru Reviewer|Amazon CodeGuru の機能のひとつ。<br>GitHub などの リポジトリにあるコード(python、Java、JavaScript)をスキャンし、改善を提案してくれる。<br>※10万行ごとに10ドルのコストがかかる。|検討|
    |AWS WAF|AWSが提供するWAFサービス。<br>AWSが提供するルールグループでOWASP Top 10をサポートできる。<br>ルールを ELB または CloudFrontに設置することで、クライアントのアクセスを必ず WAF が評価するように なる。|検討|
    |ACM|SSL証明書を発行するマネージドサービス。<br>ELB や CloudFront にアタッチすることができ、利用者と AWS サービス間の通信を暗号化し、のぞき見することを防ぐことが可能。<br>パブリック証明書を発行するには証明書に埋め込むドメインが申請者の持ち主であるか確認が必要。|検討|
* OS、ミドルウェア
    |対策|説明|適用状況|
    |:--|:--|:--|
    |Amazon Inspector|脆弱性のスキャンを行うサービス。<br>EC2とECRのスキャンに対応。<br>自動修復機能はない為、発見した後にどう対処していくかが重要。<br>※SSM Patch Manager というサービスもあり、パッチの自動化支援も提供されているので、併せて検討しても良い。|検討|
* その他
    |対策|説明|適用状況|
    |:--|:--|:--|
    |Security Hub|AWSの設定情報を検索して、脆弱な部分を指摘してくれたり、特定の業界基準に準拠しているかを確認してくれる。<br>※利用料がそれなりにかかる。|検討|
### 認証情報の流出
* IAMでの対策
    |対策|説明|適用状況|
    |:--|:--|:--|
    |MFA|IAMユーザーの多要素認証|適用|
    |ロール|ロールを中心とした権限とし、アクセスキー自体は ReadOnly とする|適用<br>(S3へのアクセスにて)|
* アプリケーション
    |対策|説明|適用状況|
    |:--|:--|:--|
    |KMS|AWSが提供する暗号鍵マネージドサービス|検討<br>（S3の暗号化をKMSに変更）|
    |Secrets Manager|AWSが提供する秘匿情報をKMSで暗号化して安全に保管、呼び出しするサービス|検討<br>（RDSのパスワードを管理する際）|
### 人為的な過負荷
    |対策|説明|適用状況|
    |:--|:--|:--|
    |Shield|AWSが提供するDDoS攻撃からインフラを保護してくれるマネージドサービス|適用（Standard）|

## 今回の課題の感想
セキュリティ対策は、基準が明確にあるわけではないので、「どこからどこまでやるか？」ということを定めるのが難しいと感じました。<br>
最終判断は事業責任者ということで、いろいろなパターンを考察、提案して、相手の責任意識共に擦り合わせていくのが大事なのかな思いました。<br> 
実際現場に入り、経験していかないとセキュリティの設定基準の感覚は掴めなさそうなので、まずはOWASPなどに目を通して理解を深めておこうと思いました。


